<mat-card class="common-theme activity-card">
  <mat-card-title>{{ title }}</mat-card-title>
  <mat-card-content>
    <form role="form" [formGroup]="activityForm" fxLayout="column" fxLayoutGap="8px" class="activity-form">
      <div fxLayout="row" fxLayoutGap="8px">
        <mat-form-field appearance="outline" floatLabel="always" class="date-field">
          <mat-label>Дата</mat-label>
          <input matInput [matDatepicker]="activityDatePicker" formControlName="activityDate" required>
          <mat-datepicker-toggle matSuffix [for]="activityDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #activityDatePicker></mat-datepicker>
          <mat-error>
            <validation-error [control]="activityDate"></validation-error>
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" floatLabel="always" class="time-field">
          <mat-label>С</mat-label>
          <input matInput formControlName="start" placeholder="ЧЧ:ММ" required>
          <mat-error>
            <validation-error [control]="start"></validation-error>
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" floatLabel="always" class="time-field">
          <mat-label>По</mat-label>
          <input matInput formControlName="end" placeholder="ЧЧ:ММ" required>
          <mat-error>
            <validation-error [control]="end"></validation-error>
          </mat-error>
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" floatLabel="always">
        <mat-label>Описание</mat-label>
        <textarea matInput matTextareaAutosize matAutosizeMaxRows="5" matAutosizeMinRows="1"
                  formControlName="description" placeholder="Введите описание" required></textarea>
        <mat-error>
          <validation-error [control]="description"></validation-error>
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" floatLabel="always">
        <mat-label>Проект</mat-label>
        <mat-select formControlName="project" placeholder="Выберите проект" (selectionChange)="filterDirections()">
          <mat-option *ngFor="let item of projects$ | async" [value]="item.id">
            {{ item.name }}
          </mat-option>
        </mat-select>
        <mat-error>
          <validation-error [control]="project"></validation-error>
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" floatLabel="always">
        <mat-label>Направление</mat-label>
        <mat-select formControlName="direction" placeholder="Выберите направление" (selectionChange)="filterActivityTypes()">
          <mat-option *ngFor="let item of directions$ | async" [value]="item.id">
            {{ item.name }}
          </mat-option>
        </mat-select>
        <mat-error>
          <validation-error [control]="direction"></validation-error>
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" floatLabel="always">
        <mat-label>Вид работы</mat-label>
        <mat-select formControlName="type" placeholder="Выберите вид работы">
          <mat-option *ngFor="let item of activityTypes$ | async" [value]="item.id">
            {{ item.name }}
          </mat-option>
        </mat-select>
        <mat-error>
          <validation-error [control]="type"></validation-error>
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" floatLabel="always">
        <mat-label>В рамках задачи</mat-label>
        <mat-select formControlName="task" placeholder="Выберите задачу"></mat-select>
        <mat-error>
          <validation-error [control]="task"></validation-error>
        </mat-error>
      </mat-form-field>
    </form>
  </mat-card-content>
  <mat-card-actions fxLayout="row" fxLayoutAlign="flex-end center" fxLayoutGap="8px">
    <button mat-button color="primary" type="button" mat-dialog-close>Отмена</button>
    <button mat-raised-button color="primary" type="button">Сохранить</button>
  </mat-card-actions>
</mat-card>
